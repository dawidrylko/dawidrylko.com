---
title: Moja historia z (nie)inteligentnym domem
description: Prawdziwa historia budowy wÅ‚asnego inteligentnego domu od zera. Osobisty zapis doÅ›wiadczeÅ„, prÃ³b, bÅ‚Ä™dÃ³w i odkryÄ‡, ktÃ³ry moÅ¼e zainspirowaÄ‡ kaÅ¼dego, kto myÅ›li o stworzeniu wÅ‚asnego smart home albo po prostu lubi opowieÅ›ci z pogranicza technologii i codziennego Å¼ycia.
date: 2025-07-16T18:00:00.000Z
featuredImg: ./0.my-smart-home.png
featuredImgAlt: 'Zrzut ekranu aplikacji Apple Home przedstawiajÄ…cy kontrolÄ™ urzÄ…dzeÅ„ smart home: rolety, oÅ›wietlenie, wentylacjÄ™ i temperaturÄ™ w wielu pokojach.'
tags: ['iot', 'smart home', 'raspberry pi', 'zigbee', 'home assistant', 'homebridge']
---

Moja przygoda ze **Smart Home** rozpoczÄ™Å‚a siÄ™ Å›wieÅ¼o po przeprowadzce do nowego mieszkania. CaÅ‚oÅ›Ä‡ idealnie siÄ™ zgraÅ‚a. _Tabula rasa_. Teoretycznie mogÅ‚em zrobiÄ‡ wszystko, na co miaÅ‚em ochotÄ™. Teoretycznie... Praktyka ma siÄ™ jednak nijak do teorii. W tym wpisie zanudzÄ™ Was mojÄ… historiÄ… z inteligentnym domem. MiaÅ‚o byÄ‡ szybko, Å‚atwo i przyjemnie, a okazaÅ‚o siÄ™ nieszybko i nieÅ‚atwo. PrzyjemnoÅ›ci jednak nie zabrakÅ‚o.

> Co trudnego moÅ¼e byÄ‡ w podÅ‚Ä…czeniu kilku urzÄ…dzeÅ„ do internetu?

MajÄ…c na uwadze moje niebagatelne doÅ›wiadczenie w szeroko pojÄ™tym Å›wiecie IT, postanowiÅ‚em, Å¼e wszystko zrobiÄ™ sam. ByÅ‚y ku temu realne podstawy. W koÅ„cu zaliczyÅ‚em na studiach przedmiot z sieci komputerowych, zbudowaÅ‚em mini stacjÄ™ pogodowÄ… opartÄ… na Atmedze, a ponadto byÅ‚em posiadaczem Raspberry PiÂ 3, ktÃ³re z powodzeniem wykorzystywaÅ‚em jako domowe centrum multimedialne.

## Home Assistant

![Strona gÅ‚Ã³wna Home Assistant](./1.Home-Assistant-strona-glowna.png)

WyposaÅ¼ony w entuzjazm i "doÅ›wiadczenie", zabraÅ‚em siÄ™ do roboty. ZaczÄ…Å‚em od najwaÅ¼niejszego (przynajmniej tak mi siÄ™ wtedy wydawaÅ‚o) elementu ukÅ‚adanki. ZainstalowaÅ‚em [Home Assistant](https://github.com/home-assistant) na mojej juÅ¼ wÃ³wczas leciwej malince, korzystajÄ…c z krÃ³lujÄ…cego wtedy Hass.io. Z perspektywy czasu wybÃ³r nie byÅ‚ zbyt trafny. Problemem nie byÅ‚ sam instalator, lecz fakt, Å¼e system zainstalowaÅ‚em na karcie SD (sic!). Tak, na najzwyklejszej karcie pamiÄ™ci, jakÄ… akurat miaÅ‚em w domu. Wszystko dziaÅ‚aÅ‚o. Karta miaÅ‚a 32 GB, wiÄ™c zaczÄ…Å‚em instalowaÄ‡ na potÄ™gÄ™ najrozmaitsze dodatki.

![WysÅ‚uÅ¼one Raspberry PiÂ 3](./2.Raspberry-Pi-3.jpg)

MiaÅ‚em juÅ¼ w domu kilka urzÄ…dzeÅ„ Xiaomi, wiÄ™c musiaÅ‚y zostaÄ‡ skonfigurowane. Zgodnie z zasadÄ…: _nic nie moÅ¼e siÄ™ zmarnowaÄ‡_. W tym czujniki do roÅ›lin Xiaomi Flower Care zamÃ³wione z AliExpress. WymusiÅ‚y one na malince wzmoÅ¼one obroty, by rejestrowaÄ‡ parametry wokÃ³Å‚ moich baobabÃ³w. Komunikacja przez Bluetooth zjadaÅ‚a wprawdzie baterie niczym Pan Kleks atrament, ale co z tego. CR2032 sÄ… tanie. Karty SD juÅ¼ niekoniecznie.

![NieszczÄ™sne czujniki do roÅ›lin Flower Care od Xiaomi](./3.Czujniki-Xiaomi-Flower-Care.jpg)

Bluetooth okazaÅ‚ siÄ™ jednak zawodny. Komunikacja byÅ‚a niestabilna i nieregularna. ChcÄ…c poprawiÄ‡ niezawodnoÅ›Ä‡ odczytÃ³w, kupiÅ‚em na Allegro moduÅ‚ ESP32 ESP-WROOM-32 z WiFi i Bluetooth, ktÃ³ry miaÅ‚ przejÄ…Ä‡ od malinki zadania zwiÄ…zane z komunikacjÄ… BLE. LiczyÅ‚em na to, Å¼e odciÄ…Å¼Ä™ Raspberry i ustabilizujÄ™ dziaÅ‚anie systemu. Niestety, zanim zdÄ…Å¼yÅ‚em wszystko podÅ‚Ä…czyÄ‡, wydarzyÅ‚o siÄ™ coÅ› nieoczekiwanego.

Pierwsza karta SD padÅ‚a po niespeÅ‚na dwÃ³ch tygodniach. Mimo Å¼e podÅ‚Ä…czonych urzÄ…dzeÅ„ byÅ‚o niewiele. CzÄ™stotliwoÅ›Ä‡ odczytÃ³w, a zwÅ‚aszcza zapisÃ³w, byÅ‚a natomiast poraÅ¼ajÄ…ca. TÅ‚umaczyÅ‚em to sobie: _To przecieÅ¼ stara karta, ktÃ³rej godzina wybiÅ‚a_. W "literaturze", zwÅ‚aszcza na Reddicie, czÄ™sto przewijaÅ‚a siÄ™ myÅ›l, Å¼e Raspberry Pi z kartÄ… pamiÄ™ci to niekoniecznie najlepszy wybÃ³r. Sama specyfikacja kart teÅ¼ nie pozostawiaÅ‚a zÅ‚udzeÅ„. Nie chciaÅ‚em jednak dopuÅ›ciÄ‡ do siebie myÅ›li, Å¼e to po prostu zÅ‚a konfiguracja. ZamÃ³wiÅ‚em na Allegro nowÄ…, "lepszÄ…" kartÄ™ SD.

![Nowa karta SD](./4.Faktura-karta-pamieci-SD.png)

Gdy przyszÅ‚a druga karta, zainstalowaÅ‚em ponownie HA na Hass.io. ZmniejszyÅ‚em czÄ™stotliwoÅ›Ä‡ odczytÃ³w i zapisÃ³w z czujnikÃ³w przy roÅ›linach oraz z czujnikÃ³w temperatury i wilgotnoÅ›ci. Czysta konfiguracja, powiadomienia o koniecznoÅ›ci podlania roÅ›lin znowu dziaÅ‚aÅ‚y. MiaÅ‚em historiÄ™ temperatury, wilgotnoÅ›ci i nasÅ‚onecznienia. ByÅ‚em zadowolony. Przez niespeÅ‚na miesiÄ…c.

Tym razem nie byÅ‚o tak spektakularnie. Karta przestaÅ‚a dziaÅ‚aÄ‡ czÄ™Å›ciowo. PoczÄ…tkowo sÄ…dziÅ‚em, Å¼e to moja wysÅ‚uÅ¼ona malinka postanowiÅ‚a przejÅ›Ä‡ na drugÄ… stronÄ™. Jednak po kilku dniach coraz bardziej niestabilnego dziaÅ‚ania, to karta dopeÅ‚niÅ‚a Å¼ywota. ByÅ‚em znowu w punkcie wyjÅ›cia.

## Homebridge

Euforia opadÅ‚a. PostanowiÅ‚em siÄ™ doedukowaÄ‡. ZamÃ³wiÅ‚em polisingowy terminal (HP T620 Quad Core 1.5 GHz, 4 GB RAM, 16 GB SSD), ktÃ³ry miaÅ‚ byÄ‡ wybawieniem i rozwiÄ…zaÄ‡ moje bolÄ…czki. Stety lub niestety, trafiÅ‚ do mnie wadliwy egzemplarz. ZwrÃ³ciÅ‚em go, zanim zdÄ…Å¼yÅ‚em zainstalowaÄ‡ cokolwiek.

W miÄ™dzyczasie, czekajÄ…c na wymianÄ™ terminala na sprawny, moim oczom ukazaÅ‚ siÄ™ projekt [Homebridge](https://github.com/homebridge/homebridge). WydaÅ‚ mi siÄ™ bardzo ciekawy. WziÄ…Å‚em kolejnÄ… kartÄ™ SD i zainstalowaÅ‚em na niej Homebridge. Tym razem w Dockerze (nie wiem, co mnie podkusiÅ‚o). Po szybkiej konfiguracji wszystko dziaÅ‚aÅ‚o dobrzeâ€¦ znowu.

![Strona gÅ‚Ã³wna Homebridge](./5.Homebridge-strona-glowna.png)

WczeÅ›niej widziaÅ‚em w dodatkach Home Assistanta charakterystycznÄ… ikonkÄ™ Homebridge, ale nie drÄ…Å¼yÅ‚em, do czego sÅ‚uÅ¼y. TrafiÅ‚em na niego zupeÅ‚nym przypadkiem. Idealnie siÄ™ zÅ‚oÅ¼yÅ‚o, poniewaÅ¼, o zgrozo, mÃ³j ekosystem oparty jest o JabÅ‚ko.

Szybko skonfigurowaÅ‚em pozostaÅ‚e elementy wyposaÅ¼enia, kupione jeszcze w zamierzchÅ‚ych czasach i spisane juÅ¼ na straty. ZrezygnowaÅ‚em caÅ‚kowicie z zapisywania historii. MiaÅ‚em moje powiadomienia, ale dodatkowo, z poziomu aplikacji Dom (o ktÃ³rej istnieniu do tej pory nie miaÅ‚em fioletowego pojÄ™cia), mogÅ‚em zmieniaÄ‡ temperaturÄ™ w lodÃ³wce LG, a takÅ¼e wÅ‚Ä…czaÄ‡ i wyÅ‚Ä…czaÄ‡ oczyszczacz powietrza z Xiaomi.

To daÅ‚o mi zupeÅ‚nie inny obraz sytuacji. Nie potrzebowaÅ‚em juÅ¼ Home Assistanta. MiaÅ‚em coÅ› lepszego, natywnÄ… aplikacjÄ™. Mimo Å¼e byÅ‚a bardziej prymitywna, speÅ‚niaÅ‚a wszystkie moje potrzeby. W dodatku mogÅ‚em zapytaÄ‡ Siri, jak siÄ™ majÄ… moje roÅ›linki.

Sklep miaÅ‚ problemy z wysyÅ‚kÄ… innego terminala w takiej samej konfiguracji, wiÄ™c zrezygnowaÅ‚em z zakupu. SpodziewaÅ‚em siÄ™ wprawdzie, Å¼e moÅ¼e powtÃ³rzyÄ‡ siÄ™ sytuacja z kartÄ… SD, ale nic takiego siÄ™ (o dziwo) nie wydarzyÅ‚o.

Nie ma rÃ³Å¼y bez kolcÃ³w. GÅ‚Ã³wnym problemem byÅ‚o wymuszone dziaÅ‚anie w obrÄ™bie sieci lokalnej. ByÅ‚o to o tyle problematyczne, Å¼e czÄ™sto, bÄ™dÄ…c w domu, wyÅ‚Ä…czaÅ‚em WiFi. RobiÅ‚em to poniewaÅ¼ nie miaÅ‚em jeszcze Å›wiatÅ‚owodu, tylko internet radiowy. Po wyÅ‚Ä…czeniu traciÅ‚em dostÄ™p do Homebridge, a co za tym idzie, do wszystkich urzÄ…dzeÅ„.

Na ratunek przyszedÅ‚ mi Apple HomePod Mini, ktÃ³ry nie byÅ‚ tylko fajnie grajÄ…cym gÅ‚oÅ›niczkiem, ale takÅ¼e peÅ‚noprawnym hubem. RozwiÄ…zanie problemu niezbyt tanie, ale gÅ‚oÅ›nik sÅ‚uÅ¼y mi po dziÅ› dzieÅ„, wiÄ™c chyba siÄ™ spÅ‚aciÅ‚.

![Apple HomePod Mini](./6.Apple-HomePod-Mini.jpg)

## Zigbee

Coraz bardziej zagÅ‚Ä™biajÄ…c siÄ™ w tematykÄ™ inteligentnych domÃ³w, zauwaÅ¼yÅ‚em, Å¼e moduÅ‚y, podzespoÅ‚y i elementy wykonawcze u pana ChiÅ„czyka sÄ… znacznie taÅ„sze niÅ¼ u nas. PostanowiÅ‚em wiÄ™c "usmartniÄ‡" niskim kosztem to, co juÅ¼ wtedy posiadaÅ‚em. ZainwestowaÅ‚em teÅ¼ w dongla Zigbee (ConBeeÂ II, on akurat tani nie byÅ‚) i dodaÅ‚em nowe kontenery: `zigbee2mqtt` oraz `mosquitto`. CaÅ‚oÅ›Ä‡ zostaÅ‚a spiÄ™ta w jednÄ… sieÄ‡, na coraz starszym Raspberry PiÂ 3. DziÄ™ki takiemu zestawowi mogÅ‚em robiÄ‡, co mi siÄ™ podobaÅ‚o.

Obecna konfiguracja smart home, prawie nieruszona od tamtego czasu, z wyjÄ…tkiem `healthcheck`, ktÃ³rego dodaÅ‚em pÃ³Åºniej:

```yaml
services:
  homebridge:
    image: homebridge/homebridge:latest
    restart: always
    network_mode: host
    hostname: homebridge
    container_name: homebridge
    volumes:
      - ./homebridge:/homebridge
    devices:
      - /dev/ttyACM0:/dev/ttyACM0
    logging:
      driver: json-file
      options:
        max-size: '10mb'
        max-file: '1'
    healthcheck:
      test: curl --fail localhost:8581 || exit 1
      interval: 60s
      retries: 5
      start_period: 300s
      timeout: 2s

  mosquitto:
    image: eclipse-mosquitto
    restart: unless-stopped
    hostname: mosquitto
    container_name: mosquitto
    ports:
      - 1883:1883
      - 9001:9001
    volumes:
      - ./mosquitto:/mosquitto
    command: 'mosquitto -c /mosquitto-no-auth.conf'

  zigbee2mqtt:
    image: koenkk/zigbee2mqtt:latest
    restart: unless-stopped
    network_mode: host
    hostname: zigbee2mqtt
    container_name: zigbee2mqtt
    volumes:
      - ./zigbee2mqtt:/app/data
      - /run/udev:/run/udev:ro
    environment:
      - TZ=Europe/Berlin
    devices:
      - /dev/ttyACM0:/dev/ttyACM0
```

## Raspberry PiÂ 5

Wszystko dziaÅ‚aÅ‚o. Bardzo dÅ‚ugo dziaÅ‚o. Po wczeÅ›niejszych perturbacjach z kartami SD nie spodziewaÅ‚em siÄ™, Å¼e aÅ¼ tak dÅ‚ugo. Pewnego lipcowego dnia 2024 roku niespodziewana burza zakoÅ„czyÅ‚a Å¼ywot mojej malinki. SpisywaÅ‚a siÄ™ Å›wietnie, ale czas byÅ‚o zrobiÄ‡ krok naprzÃ³d. KupiÅ‚em na Botlandzie nastÄ™pujÄ…cy zestaw:

- Raspberry PiÂ 5 8GB
- Raspberry Pi Active Cooler - aktywne chÅ‚odzenie (radiator + wentylator)
- Raspberry Pi 27W USB-C Power Supply - oficjalny zasilacz USB C 5,1V / 5A - biaÅ‚y
- Obudowa do Raspberry PiÂ 5 - oficjalna, czerwono-biaÅ‚a
- Bateria RTC do Raspberry PiÂ 5
- Pineboards HatDrive! Nano - adapter NVMe 2230, 2242 do Raspberry PiÂ 5

Dodatkowo na Allegro zamÃ³wiÅ‚em:

- TRANSCEND 256 GB M.2 2242 PCIe 400S Gen3x4 NVMe 3D TLC DRAM-less

Spora inwestycja, a plany byÅ‚y zaiste ogromne.

![Zestaw Raspberry PiÂ 5 - 8GB](./7.Zestaw-z-Raspberry-Pi-5-8GB.jpg)

> Wszystko bÄ™dzie inaczej

Nauczony wczeÅ›niejszymi poraÅ¼kami, postanowiÅ‚em, Å¼e teraz wszystko bÄ™dzie lepiej przemyÅ›lane. Docker Compose oraz backup, ktÃ³ry w miÄ™dzyczasie przygotowaÅ‚em, pozwoliÅ‚y na bezproblemowe odtworzenie Å›rodowiska. Nawet siÄ™ zdziwiÅ‚em, Å¼e mimo innej konfiguracji sprzÄ™towej wszystko dziaÅ‚a. GÅ‚Ã³wne obawy dotyczyÅ‚y dongla Zigbee.

SwojÄ… drogÄ…, projekt backupu to temat na osobnÄ… historiÄ™, bo zrealizowaÅ‚em go doÅ›Ä‡ nietypowo. Z wykorzystaniem GitHub Actions, CRON-a, skryptÃ³w bashowych, [Bats](https://github.com/bats-core/bats-core) oraz storage'u w repozytorium GitHuba.

![Smart Home backup](./8.Smart-Home-backup.png)

Konfiguracja okazaÅ‚a siÄ™ Å›wietna, wszystko dziaÅ‚aÅ‚o jak zÅ‚oto. Z wyjÄ…tkiem tego, Å¼e Raspberry PiÂ 5... siÄ™ nudziÅ‚o. Å»eby urozmaiciÄ‡ sobie Å¼ycie i doÅ‚oÅ¼yÄ‡ sobie niepotrzebnej roboty, postanowiÅ‚em przenieÅ›Ä‡ caÅ‚Ä… konfiguracjÄ™ na mojego Synology. Niech wszystko bÄ™dzie w jednym miejscu. W koÅ„cu mam wersjÄ™ z plusem, wiÄ™c mogÄ™ wrzuciÄ‡ Dockera i dziaÅ‚aÄ‡.

![Synology NAS](./9.Synology-NAS.jpg)

Tak teÅ¼ zrobiÅ‚em. Szybko przeniosÅ‚em kontenery na Synology. SkonfigurowaÅ‚em ponownie backup (dorobiÅ‚em teÅ¼ skrypty automatyzujÄ…ce konfiguracjÄ™ backupu, CRON-Ã³w i uprawnieÅ„). Zadowolony z siebie mogÅ‚em wreszcie odpoczÄ…Ä‡.

Odpoczynek nie trwaÅ‚ jednak dÅ‚ugo. NajbliÅ¼szy rachunek za prÄ…d pokazaÅ‚, Å¼e nie byÅ‚ to najbardziej przemyÅ›lany wybÃ³r. Synology 423+ z hibernacjÄ… dyskÃ³w pobiera mniej niÅ¼ 5W, a w trybie dostÄ™pu do danych do 32W. Szybkie odczyty z watomierza pokazaÅ‚y, Å¼e ta konfiguracja jest przestrzelona. Raspberry PiÂ 5 z aktywnym chÅ‚odzeniem pobieraÅ‚o mniej niÅ¼ 4W. Rachunek byÅ‚ prosty: nie muszÄ™ stresowaÄ‡ NAS-a, ktÃ³ry robi mi gÅ‚Ã³wnie za storage, skoro malinka w eksploatacji jest duÅ¼o taÅ„sza. W dodatku nie bÄ™dÄ™ zaÅ¼ynaÄ‡ cache'a oraz caÅ‚ej maszyny, nie wspominajÄ…c o separacji.

Nie wrÃ³ciÅ‚em jednak do wczeÅ›niejszej malinki. KupiÅ‚em nowÄ… obudowÄ™ (Argon ONE V3 M.2 NVMe PCIe do Raspberry PiÂ 5, z wentylatorem i radiatorem, aluminiowa, czarna) oraz Raspberry PiÂ 5 w wersji z 4GB pamiÄ™ci RAM. Zestaw ten mam do momentu tworzenia tego wpisu i jestem zadowolony.

![Zestaw Raspberry PiÂ 5 - 4GB z obudowÄ… Argon ONE](./10.Zestaw-z-Raspberry-Pi-5-4GB-i-obudowa-Argon-ONE.jpg)

## Podsumowanie

Z perspektywy czasu mogÄ™ Å›miaÅ‚o powiedzieÄ‡: _byÅ‚o warto_. ChoÄ‡ po drodze nie brakowaÅ‚o bÅ‚Ä™dÃ³w, momentami caÅ‚kiem kosztownych, wszystkie traktujÄ™ jako cenne lekcje. Moja kilkuletnia przygoda z inteligentnym domem daÅ‚a mi mnÃ³stwo frajdy, solidnÄ… porcjÄ™ wiedzy i duÅ¼o satysfakcji.

### Wnioski

1. Zanim coÅ› zrobisz - policz.
2. Zanim coÅ› kupisz - sprawdÅº, czy naprawdÄ™ tego potrzebujesz.
3. Zanim przeniesiesz wszystko na inny sprzÄ™t - zadaj sobie pytanie: _czy warto?_

Czasem mniej znaczy wiÄ™cej, a kilka watÃ³w poboru energii moÅ¼e w skali miesiÄ…ca zaskakujÄ…co zawaÅ¼yÄ‡ na rachunku. W Å›wiecie smart home granica miÄ™dzy zabawÄ…, a przesadÄ… jest bardzo cienka.

### Co dalej?

W kolejnych wpisach (ktÃ³re pojawiÄ… siÄ™, kiedy czas pozwoli, czyli niewiadomo kiedy) planujÄ™ opisaÄ‡ rÃ³Å¼ne scenariusze i automatyzacje, ktÃ³re zbudowaÅ‚em. BÄ™dÄ… miÄ™dzy innymi:

- historia Å›ciemniaczy z Ikei, ktÃ³re niespodziewanie zyskaÅ‚y nowe Å¼ycie dziÄ™ki Zigbee,
- moje podejÅ›cie do bezpieczeÅ„stwa: kontaktrony, czujniki zalania i kamery,
- automatyzacje Å›wiatÅ‚a, wentylacji i zuÅ¼ycia prÄ…du,
- jak rolety zmieniajÄ… Å¼ycie bardziej, niÅ¼ by siÄ™ wydawaÅ‚o,
- eksperymenty z NFC, ogrzewaniem, podlewaniem i doÅ›wietlaniem roÅ›lin,
- oraz oczywiÅ›cie - projekt backupu, ktÃ³ry sam w sobie zasÅ‚uguje na osobny rozdziaÅ‚.

To wszystko juÅ¼ mam, uÅ¼ywam i rozwijam. NiektÃ³re rozwiÄ…zania sÄ… genialne w swej prostocie. Inne sÄ… efektem przesadnej ciekawoÅ›ci i chÄ™ci doÅ‚oÅ¼enia sobie roboty ğŸ™ƒ
